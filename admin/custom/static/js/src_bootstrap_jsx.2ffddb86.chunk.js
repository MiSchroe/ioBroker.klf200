"use strict";(self.webpackChunkiobroker_admin_component_klf200=self.webpackChunkiobroker_admin_component_klf200||[]).push([["node_modules_react_jsx-runtime_js","src_bootstrap_jsx"],{1278:(S,u,t)=>{var e=t(64922),a=t(28437),m=t.n(a),T=t(94140),E=t(6761),L=t(40805),i=t(37449),n=t(67085),P=t(95973);const b=({testResults:r})=>{const o=(0,n.useTheme)();return(0,n.useMediaQuery)(o.breakpoints.up("sm"))?(0,e.jsx)(n.TableContainer,{children:(0,e.jsxs)(n.Table,{children:[(0,e.jsx)(n.TableHead,{children:(0,e.jsxs)(n.TableRow,{children:[(0,e.jsx)(n.TableCell,{align:"left",size:"small",children:i.I18n.t("custom_klf200_test_connection_status_header")}),(0,e.jsx)(n.TableCell,{align:"left",children:i.I18n.t("custom_klf200_test_connection_step_name_header")}),(0,e.jsx)(n.TableCell,{align:"left",children:i.I18n.t("custom_klf200_test_connection_result_header")}),(0,e.jsx)(n.TableCell,{align:"left",children:i.I18n.t("custom_klf200_test_connection_message_header")})]})}),(0,e.jsx)(n.TableBody,{children:r.map(l=>{var p,C;return(0,e.jsxs)(n.TableRow,{sx:{"&:last-child td, &:last-child th":{border:0}},hover:!0,children:[(0,e.jsx)(n.TableCell,{align:"center",size:"small",children:l.run?l.success?"\u2705":"\u274C":""}),(0,e.jsx)(n.TableCell,{align:"left",children:l.stepName}),(0,e.jsx)(n.TableCell,{align:typeof l.result=="number"?"right":"left",children:String((p=l.result)!=null?p:"")}),(0,e.jsx)(n.TableCell,{align:"left",children:(C=l.message)!=null?C:""})]},l.stepOrder)})})]})}):(0,e.jsx)(n.Stack,{divider:(0,e.jsx)(n.Divider,{orientation:"horizontal",flexItem:!0}),spacing:1,sx:{marginTop:1,overflow:"auto",height:"100%"},children:r.map(l=>{var p,C;return(0,e.jsxs)(n.Grid,{container:!0,children:[(0,e.jsx)(n.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:i.I18n.t("custom_klf200_test_connection_step_name_header")}),(0,e.jsx)(n.Grid,{item:!0,xs:6,children:l.stepName}),(0,e.jsx)(n.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:i.I18n.t("custom_klf200_test_connection_status_header")}),(0,e.jsx)(n.Grid,{item:!0,xs:6,children:l.run?l.success?"\u2705":"\u274C":""}),(0,e.jsx)(n.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:i.I18n.t("custom_klf200_test_connection_result_header")}),(0,e.jsx)(n.Grid,{item:!0,xs:6,children:String((p=l.result)!=null?p:"")}),(0,e.jsx)(n.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:i.I18n.t("custom_klf200_test_connection_message_header")}),(0,e.jsx)(n.Grid,{item:!0,xs:6,children:(C=l.message)!=null?C:""})]},l.stepOrder)})})};var c=(r,o,s)=>new Promise((l,p)=>{var C=_=>{try{O(s.next(_))}catch(A){p(A)}},K=_=>{try{O(s.throw(_))}catch(A){p(A)}},O=_=>_.done?l(_.value):Promise.resolve(_.value).then(C,K);O((s=s.apply(r,o)).next())});const f={button:{minWidth:150}},j=({adapterName:r,instance:o,socket:s,data:l})=>{const[p,C]=(0,a.useState)(!1),[K,O]=(0,a.useState)(!1),[_,A]=(0,a.useState)([]);(0,a.useEffect)(()=>{const B=(D,M)=>{const $=M?M.val:!1;C($)};return c(void 0,null,function*(){const D=yield s.getState(`system.adapter.${r}.${o}.alive`);D&&D.val!==void 0?C(D.val):C(!1),yield s.subscribeState(`system.adapter.${r}.${o}.alive`,B)}),()=>{s.unsubscribeState(`system.adapter.${r}.${o}.alive`,B)}},[]),(0,a.useEffect)(()=>{const B=(D,M)=>{if(D.endsWith(".running")){const $=M?M.val:!1;O($)}else if(D.endsWith(".testResults")){const $=M?JSON.parse(M.val||"[]"):[];A($)}};return c(void 0,null,function*(){const D=yield s.getState(`${r}.${o}.TestConnection.running`);if(D&&D.val===!0){O(D.val);const M=yield s.getState(`${r}.${o}.TestConnection.testResults`);M&&M.val!==void 0&&A(JSON.parse(M.val||"[]"))}else O(!1),s.setState(`${r}.${o}.TestConnection.testResults`,"[]",!0);yield s.subscribeState(`${r}.${o}.TestConnection.*`,B)}),()=>{s.unsubscribeState(`${r}.${o}.TestConnection.*`,B)}},[]);const J=()=>c(void 0,null,function*(){try{const B={command:"ConnectionTest",hostname:l.host,password:yield s.encrypt(l.password)};l.advancedSSLConfiguration&&(B.advancedSSLConfiguration={sslFingerprint:l.SSLFingerprint,sslPublicKey:l.SSLPublicKey});const z=yield s.sendTo(`${r}.${o}`,B.command,B);A(z)}finally{}});return(0,e.jsxs)(m().Fragment,{children:[(0,e.jsx)(n.Button,{style:f.button,color:"secondary",variant:"contained",disabled:!p||K,onClick:J,children:i.I18n.t("custom_klf200_test_connection_button")}),!p&&(0,e.jsx)("p",{children:i.I18n.t("custom_klf200_test_connection_not_alive_hint")}),(K||_.length>0)&&(0,e.jsx)(b,{testResults:_})]})};var F=Object.defineProperty,U=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,d=(r,o,s)=>o in r?F(r,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[o]=s,v=(r,o)=>{for(var s in o||(o={}))N.call(o,s)&&d(r,s,o[s]);if(U)for(var s of U(o))G.call(o,s)&&d(r,s,o[s]);return r},x=(r,o,s)=>d(r,typeof o!="symbol"?o+"":o,s),g=(r,o,s)=>new Promise((l,p)=>{var C=_=>{try{O(s.next(_))}catch(A){p(A)}},K=_=>{try{O(s.throw(_))}catch(A){p(A)}},O=_=>_.done?l(_.value):Promise.resolve(_.value).then(C,K);O((s=s.apply(r,o)).next())});const I={app:r=>({backgroundColor:r.palette.background.default,color:r.palette.text.primary,height:"100%"}),item:{padding:50}};class R extends i.GenericApp{constructor(o){const s=v({},o);s.Connection=i.AdminConnection,super(o,s),x(this,"handleAliveChange",l=>{this.setState({alive:l.target.checked}),this.socket.setState(`system.adapter.klf200.${this.props.instance}.alive`,{val:l.target.checked,ack:!0})}),this.state={theme:this.createTheme(),native:{host:"localhost",password:"velux123",enableAutomaticReboot:!0,automaticRebootCronTime:"0 3 * * *",advancedSSLConfiguration:!1,SSLPublicKey:"",SSLFingerprint:""},alive:!1,testResults:[{stepOrder:1,stepName:"Name lookup",run:!0,success:!0,message:"Hostname localhost resolves to IP address 127.0.0.1.",result:"127.0.0.1"},{stepOrder:2,stepName:"Ping",run:!0,success:!0,message:"Ping was successful after 42 milliseconds.",result:42},{stepOrder:3,stepName:"Connection",run:!0,success:!1,message:"Can't establish a secure connection: No matching protocol found.",result:new Error("No matching protocol found.")},{stepOrder:4,stepName:"Login",run:!1}]},i.I18n.setLanguage((navigator.language||navigator.userLanguage||"en").substring(0,2).toLowerCase())}handleTestConnection(o,s,l,p){return g(this,null,function*(){console.log("handleTestConnection",o,s,l,p)})}render(){return this.state.loaded?(0,e.jsx)(E.A,{injectFirst:!0,children:(0,e.jsx)(L.A,{theme:this.state.theme,children:(0,e.jsxs)(n.Box,{sx:I.app,children:[(0,e.jsx)("div",{style:I.item,children:(0,e.jsx)(n.FormControlLabel,{label:"alive",control:(0,e.jsx)(n.Switch,{checked:this.state.alive,onChange:this.handleAliveChange})})}),(0,e.jsx)("div",{style:I.item,children:(0,e.jsx)(j,{socket:this.socket,themeType:this.state.themeType,themeName:this.state.themeName,data:this.state.native,onError:()=>{},schema:{name:"ConfigCustomKlf200Set/Components/ConnectionTestComponent",type:"custom"}})})]})})}):(0,e.jsx)(E.A,{injectFirst:!0,children:(0,e.jsx)(L.A,{theme:this.state.theme,children:(0,e.jsx)(i.Loader,{themeType:this.state.themeType})})})}}const W=R;window.adapterName="adapter-component-template";const H=document.getElementById("root");(0,T.H)(H).render((0,e.jsx)(m().StrictMode,{children:(0,e.jsx)(W,{socket:{port:8081}})}))},93225:(S,u,t)=>{t.d(u,{A:()=>T});var e=t(28437),a=t.n(e);const T=e.createContext(null)},15217:(S,u,t)=>{t.d(u,{A:()=>T});var e=t(28437),a=t.n(e),m=t(93225);function T(){return e.useContext(m.A)}},36577:(S,u,t)=>{t.d(u,{A:()=>c,I:()=>b});var e=t(58168),a=t(98587),m=t(28437),T=t.n(m),E=t(95973),L=t.n(E),i=t(64922);const n=["value"],P=m.createContext();function h(f){let{value:y}=f,j=(0,a.A)(f,n);return(0,i.jsx)(P.Provider,(0,e.A)({value:y!=null?y:!0},j))}const b=()=>{const f=m.useContext(P);return f!=null?f:!1},c=h},34399:(S,u,t)=>{t.d(u,{A:()=>G});var e=t(58168),a=t(28437),m=t(95973),T=t(15217),E=t(93225);const i=typeof Symbol=="function"&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var n=t(64922);function P(d,v){return typeof v=="function"?v(d):(0,e.A)({},d,v)}function h(d){const{children:v,theme:x}=d,g=(0,T.A)(),I=a.useMemo(()=>{const R=g===null?x:P(g,x);return R!=null&&(R[i]=g!==null),R},[x,g]);return(0,n.jsx)(E.A.Provider,{value:I,children:v})}const b=h;var c=t(66252),f=t(25120),y=t(36577),j=t(78684);const F={};function U(d,v,x,g=!1){return a.useMemo(()=>{const I=d&&v[d]||v;if(typeof x=="function"){const R=x(I),W=d?(0,e.A)({},v,{[d]:R}):R;return g?()=>W:W}return d?(0,e.A)({},v,{[d]:x}):(0,e.A)({},v,x)},[d,v,x,g])}function N(d){const{children:v,theme:x,themeId:g}=d,I=(0,f.A)(F),R=(0,T.A)()||F,W=U(g,I,x),H=U(g,R,x,!0),X=W.direction==="rtl";return(0,n.jsx)(b,{theme:H,children:(0,n.jsx)(c.T.Provider,{value:W,children:(0,n.jsx)(y.A,{value:X,children:(0,n.jsx)(j.A,{value:W==null?void 0:W.components,children:v})})})})}const G=N},25120:(S,u,t)=>{t.d(u,{A:()=>L});var e=t(28437),a=t.n(e),m=t(66252);function T(i){return Object.keys(i).length===0}function E(i=null){const n=e.useContext(m.T);return!n||T(n)?i:n}const L=E},40805:(S,u,t)=>{t.d(u,{A:()=>b});var e=t(58168),a=t(98587),m=t(28437),T=t.n(m),E=t(95973),L=t.n(E),i=t(34399),n=t(92066),P=t(64922);const h=["theme"];function b(c){let{theme:f}=c,y=(0,a.A)(c,h);const j=f[n.A];return(0,P.jsx)(i.A,(0,e.A)({},y,{themeId:j?n.A:void 0,theme:j||f}))}},94140:(S,u,t)=>{var e,a=t(23479);if(1)u.H=a.createRoot,e=a.hydrateRoot;else var m},13394:(S,u,t)=>{var e;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=t(28437),m=Symbol.for("react.element"),T=Symbol.for("react.fragment"),E=Object.prototype.hasOwnProperty,L=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function n(P,h,b){var c,f={},y=null,j=null;b!==void 0&&(y=""+b),h.key!==void 0&&(y=""+h.key),h.ref!==void 0&&(j=h.ref);for(c in h)E.call(h,c)&&!i.hasOwnProperty(c)&&(f[c]=h[c]);if(P&&P.defaultProps)for(c in h=P.defaultProps,h)f[c]===void 0&&(f[c]=h[c]);return{$$typeof:m,type:P,key:y,ref:j,props:f,_owner:L.current}}e=T,u.jsx=n,u.jsxs=n},64922:(S,u,t)=>{S.exports=t(13394)}}]);

//# sourceMappingURL=src_bootstrap_jsx.2ffddb86.chunk.js.map