(self.webpackChunkiobroker_admin_component_klf200=self.webpackChunkiobroker_admin_component_klf200||[]).push([["node_modules_react_jsx-runtime_js-_3112","src_Components_jsx"],{62218:(T,u,l)=>{"use strict";l.r(u),l.d(u,{default:()=>E});var s=l(64922),N=l(28437),S=l(95973),r=l.n(S),n=l(67085),y=l(60556),b=Object.defineProperty,m=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable,d=(o,t,e)=>t in o?b(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,C=(o,t)=>{for(var e in t||(t={}))c.call(t,e)&&d(o,e,t[e]);if(m)for(var e of m(t))v.call(t,e)&&d(o,e,t[e]);return o};const x={button:{minWidth:150},table:{minWidth:650}},j=(...o)=>t=>e=>{const i=(0,n.useTheme)(),p=(0,n.useMediaQuery)(i.breakpoints.up(...o));return(0,s.jsx)(t,C({mediaQuery:p},e))};class O extends y.ConfigGeneric{renderItem(t,e,i){return this.props.mediaQuery?(0,s.jsx)(n.TableContainer,{children:(0,s.jsxs)(n.Table,{children:[(0,s.jsx)(n.TableHead,{children:(0,s.jsxs)(n.TableRow,{children:[(0,s.jsx)(n.TableCell,{align:"left",size:"small",children:"Status"}),(0,s.jsx)(n.TableCell,{align:"left",children:"Step name"}),(0,s.jsx)(n.TableCell,{align:"left",children:"Result"}),(0,s.jsx)(n.TableCell,{align:"left",children:"Message"})]})}),(0,s.jsx)(n.TableBody,{children:this.props.data.testResults.map(a=>{var f,h;return(0,s.jsxs)(n.TableRow,{sx:{"&:last-child td, &:last-child th":{border:0}},hover:!0,children:[(0,s.jsx)(n.TableCell,{align:"center",size:"small",children:a.run?a.success?"\u2705":"\u274C":""}),(0,s.jsx)(n.TableCell,{align:"left",children:a.stepName}),(0,s.jsx)(n.TableCell,{align:typeof a.result=="number"?"right":"left",children:String((f=a.result)!=null?f:"")}),(0,s.jsx)(n.TableCell,{align:"left",children:(h=a.message)!=null?h:""})]},a.stepOrder)})})]})}):(0,s.jsx)(n.Stack,{divider:(0,s.jsx)(n.Divider,{orientation:"horizontal",flexItem:!0}),spacing:1,sx:{marginTop:1,overflow:"auto",height:"100%"},children:this.props.data.testResults.map(a=>{var f,h;return(0,s.jsxs)(n.Grid,{container:!0,children:[(0,s.jsx)(n.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:"Step name"}),(0,s.jsx)(n.Grid,{item:!0,xs:6,children:a.stepName}),(0,s.jsx)(n.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:"Status"}),(0,s.jsx)(n.Grid,{item:!0,xs:6,children:a.run?a.success?"\u2705":"\u274C":""}),(0,s.jsx)(n.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:"Result"}),(0,s.jsx)(n.Grid,{item:!0,xs:6,children:String((f=a.result)!=null?f:"")}),(0,s.jsx)(n.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:"Message"}),(0,s.jsx)(n.Grid,{item:!0,xs:6,children:(h=a.message)!=null?h:""})]},a.stepOrder)})})}}O.propTypes={socket:r().object.isRequired,themeType:r().string,themeName:r().string,style:r().object,data:r().object.isRequired,schema:r().object,onError:r().func,onChange:r().func};const k=j("sm")(O);var G=l(47952),w=Object.defineProperty,I=(o,t,e)=>t in o?w(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,_=(o,t,e)=>I(o,typeof t!="symbol"?t+"":t,e),P=(o,t,e)=>new Promise((i,p)=>{var a=g=>{try{h(e.next(g))}catch(R){p(R)}},f=g=>{try{h(e.throw(g))}catch(R){p(R)}},h=g=>g.done?i(g.value):Promise.resolve(g.value).then(a,f);h((e=e.apply(o,t)).next())});const W={button:{minWidth:150},table:{minWidth:650}};class $ extends y.ConfigGeneric{constructor(t){super(t),_(this,"onAliveChanged",(e,i)=>{const p=i?i.val:!1;p!==this.state.alive&&this.setState({alive:p})}),_(this,"onChangedState",(e,i)=>{if(e.endsWith(".running")){const p=i?i.val:!1;p!==this.state.testRunning&&this.setState({testRunning:p})}else if(e.endsWith(".testResults")){const p=i?JSON.parse(i.val||"[]"):[];this.setState({testResults:p})}}),_(this,"testConnectionHandler",()=>P(this,null,function*(){try{const e={command:"ConnectionTest",hostname:this.props.data.host,password:yield this.props.socket.encrypt(this.props.data.password)};this.props.data.advancedSSLConfiguration&&(e.advancedSSLConfiguration={sslFingerprint:this.props.data.SSLFingerprint,sslPublicKey:this.props.data.SSLPublicKey});const i=yield this.props.socket.sendTo(`${this.props.adapterName}.${this.props.instance}`,e.command,e);this.setState({testResults:i})}finally{}})),this.state={alive:!1,testRunning:!1,testResults:[]}}componentDidMount(){super.componentDidMount(),this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(t=>P(this,null,function*(){t&&t.val!==void 0?this.setState({alive:t.val}):this.setState({alive:!1});const e=yield this.props.socket.getState(`${this.props.adapterName}.${this.props.instance}.TestConnection.running`);if(e&&e.val===!0){this.setState({testRunning:!0});const i=yield this.props.socket.getState(`${this.props.adapterName}.${this.props.instance}.TestConnection.testResults`);i&&i.val!==void 0&&this.setState({testResults:JSON.parse(i.val||"[]")})}else this.setState({testRunning:!1}),this.props.socket.setState(`${this.props.adapterName}.${this.props.instance}.TestConnection.testResults`,"[]",!0);yield this.props.socket.subscribeState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`,this.onAliveChanged),yield this.props.socket.subscribeState(`${this.props.adapterName}.${this.props.instance}.TestConnection.*`,this.onChangedState)}))}componentWillUnmount(){super.componentWillUnmount(),this.props.socket.unsubscribeState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`,this.onAliveChanged),this.props.socket.unsubscribeState(`${this.props.adapterName}.${this.props.instance}.TestConnection.*`,this.onChangedState)}onConnectionTestProgress(t,e,i){i==="ConnectionTestProgress"&&this.setState({testResults:t})}renderItem(t,e,i){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Button,{style:W.button,color:"secondary",variant:"contained",disabled:!this.state.alive||this.state.testRunning,onClick:this.testConnectionHandler,children:"Test connection"}),this.state.testRunning||this.state.testResults.length>0?(0,s.jsx)(k,{socket:this.props.socket,themeType:this.state.themeType,themeName:this.state.themeName,data:this.state,onError:()=>{},schema:{name:"ConfigCustomKlf200Set/Components/ConnectionTestResultTableComponent",type:"custom"}}):null]})}}$.propTypes={socket:r().object.isRequired,themeType:r().string,themeName:r().string,style:r().object,data:r().object.isRequired,attr:r().string,schema:r().object,onError:r().func,onChange:r().func};const E={ConnectionTestComponent:$}},13394:(T,u,l)=>{"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=l(28437),N=Symbol.for("react.element"),S=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,n=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function b(m,c,v){var d,C={},x=null,j=null;v!==void 0&&(x=""+v),c.key!==void 0&&(x=""+c.key),c.ref!==void 0&&(j=c.ref);for(d in c)r.call(c,d)&&!y.hasOwnProperty(d)&&(C[d]=c[d]);if(m&&m.defaultProps)for(d in c=m.defaultProps,c)C[d]===void 0&&(C[d]=c[d]);return{$$typeof:N,type:m,key:x,ref:j,props:C,_owner:n.current}}u.Fragment=S,u.jsx=b,u.jsxs=b},64922:(T,u,l)=>{"use strict";T.exports=l(13394)},47952:()=>{}}]);

//# sourceMappingURL=src_Components_jsx.9b9b4356.chunk.js.map