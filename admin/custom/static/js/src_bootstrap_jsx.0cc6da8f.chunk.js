"use strict";(self.webpackChunkiobroker_admin_component_klf200=self.webpackChunkiobroker_admin_component_klf200||[]).push([["node_modules_react_jsx-runtime_js","src_bootstrap_jsx"],{1278:(M,u,t)=>{var e=t(64922),i=t(28437),m=t.n(i),x=t(94140),E=t(6761),L=t(40805),f=t(37449),n=t(67085),P=t(95973);const b=({testResults:r})=>{const o=(0,n.useTheme)();return(0,n.useMediaQuery)(o.breakpoints.up("sm"))?(0,e.jsx)(n.TableContainer,{children:(0,e.jsxs)(n.Table,{children:[(0,e.jsx)(n.TableHead,{children:(0,e.jsxs)(n.TableRow,{children:[(0,e.jsx)(n.TableCell,{align:"left",size:"small",children:"Status"}),(0,e.jsx)(n.TableCell,{align:"left",children:"Step name"}),(0,e.jsx)(n.TableCell,{align:"left",children:"Result"}),(0,e.jsx)(n.TableCell,{align:"left",children:"Message"})]})}),(0,e.jsx)(n.TableBody,{children:r.map(l=>{var T,C;return(0,e.jsxs)(n.TableRow,{sx:{"&:last-child td, &:last-child th":{border:0}},hover:!0,children:[(0,e.jsx)(n.TableCell,{align:"center",size:"small",children:l.run?l.success?"\u2705":"\u274C":""}),(0,e.jsx)(n.TableCell,{align:"left",children:l.stepName}),(0,e.jsx)(n.TableCell,{align:typeof l.result=="number"?"right":"left",children:String((T=l.result)!=null?T:"")}),(0,e.jsx)(n.TableCell,{align:"left",children:(C=l.message)!=null?C:""})]},l.stepOrder)})})]})}):(0,e.jsx)(n.Stack,{divider:(0,e.jsx)(n.Divider,{orientation:"horizontal",flexItem:!0}),spacing:1,sx:{marginTop:1,overflow:"auto",height:"100%"},children:r.map(l=>{var T,C;return(0,e.jsxs)(n.Grid,{container:!0,children:[(0,e.jsx)(n.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:"Step name"}),(0,e.jsx)(n.Grid,{item:!0,xs:6,children:l.stepName}),(0,e.jsx)(n.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:"Status"}),(0,e.jsx)(n.Grid,{item:!0,xs:6,children:l.run?l.success?"\u2705":"\u274C":""}),(0,e.jsx)(n.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:"Result"}),(0,e.jsx)(n.Grid,{item:!0,xs:6,children:String((T=l.result)!=null?T:"")}),(0,e.jsx)(n.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:"Message"}),(0,e.jsx)(n.Grid,{item:!0,xs:6,children:(C=l.message)!=null?C:""})]},l.stepOrder)})})};var a=(r,o,s)=>new Promise((l,T)=>{var C=c=>{try{j(s.next(c))}catch(A){T(A)}},K=c=>{try{j(s.throw(c))}catch(A){T(A)}},j=c=>c.done?l(c.value):Promise.resolve(c.value).then(C,K);j((s=s.apply(r,o)).next())});const h={button:{minWidth:150},table:{minWidth:650}},O=({adapterName:r,instance:o,socket:s,data:l})=>{const[T,C]=(0,i.useState)(!1),[K,j]=(0,i.useState)(!1),[c,A]=(0,i.useState)([]);(0,i.useEffect)(()=>{const B=(S,D)=>{const $=D?D.val:!1;C($)};return a(void 0,null,function*(){const S=yield s.getState(`system.adapter.${r}.${o}.alive`);S&&S.val!==void 0?C(S.val):C(!1),yield s.subscribeState(`system.adapter.${r}.${o}.alive`,B)}),()=>{s.unsubscribeState(`system.adapter.${r}.${o}.alive`,B)}},[]),(0,i.useEffect)(()=>{const B=(S,D)=>{if(S.endsWith(".running")){const $=D?D.val:!1;j($)}else if(S.endsWith(".testResults")){const $=D?JSON.parse(D.val||"[]"):[];A($)}};return a(void 0,null,function*(){const S=yield s.getState(`${r}.${o}.TestConnection.running`);if(S&&S.val===!0){j(S.val);const D=yield s.getState(`${r}.${o}.TestConnection.testResults`);D&&D.val!==void 0&&A(JSON.parse(D.val||"[]"))}else j(!1),s.setState(`${r}.${o}.TestConnection.testResults`,"[]",!0);yield s.subscribeState(`${r}.${o}.TestConnection.*`,B)}),()=>{s.unsubscribeState(`${r}.${o}.TestConnection.*`,B)}},[]);const J=()=>a(void 0,null,function*(){try{const B={command:"ConnectionTest",hostname:l.host,password:yield s.encrypt(l.password)};l.advancedSSLConfiguration&&(B.advancedSSLConfiguration={sslFingerprint:l.SSLFingerprint,sslPublicKey:l.SSLPublicKey});const z=yield s.sendTo(`${r}.${o}`,B.command,B);A(z)}finally{}});return(0,e.jsxs)(m().Fragment,{children:[(0,e.jsx)(n.Button,{style:h.button,color:"secondary",variant:"contained",disabled:!T||K,onClick:J,children:"Test connection"}),(K||c.length>0)&&(0,e.jsx)(b,{testResults:c})]})};var F=Object.defineProperty,U=Object.getOwnPropertySymbols,N=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable,d=(r,o,s)=>o in r?F(r,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[o]=s,v=(r,o)=>{for(var s in o||(o={}))N.call(o,s)&&d(r,s,o[s]);if(U)for(var s of U(o))G.call(o,s)&&d(r,s,o[s]);return r},p=(r,o,s)=>d(r,typeof o!="symbol"?o+"":o,s),g=(r,o,s)=>new Promise((l,T)=>{var C=c=>{try{j(s.next(c))}catch(A){T(A)}},K=c=>{try{j(s.throw(c))}catch(A){T(A)}},j=c=>c.done?l(c.value):Promise.resolve(c.value).then(C,K);j((s=s.apply(r,o)).next())});const W={app:r=>({backgroundColor:r.palette.background.default,color:r.palette.text.primary,height:"100%"}),item:{padding:50}};class R extends f.GenericApp{constructor(o){const s=v({},o);s.Connection=f.AdminConnection,super(o,s),p(this,"handleAliveChange",l=>{this.setState({alive:l.target.checked}),this.socket.setState(`system.adapter.klf200.${this.props.instance}.alive`,{val:l.target.checked,ack:!0})}),this.state={theme:this.createTheme(),native:{host:"localhost",password:"velux123",enableAutomaticReboot:!0,automaticRebootCronTime:"0 3 * * *",advancedSSLConfiguration:!1,SSLPublicKey:"",SSLFingerprint:""},alive:!1,testResults:[{stepOrder:1,stepName:"Name lookup",run:!0,success:!0,message:"Hostname localhost resolves to IP address 127.0.0.1.",result:"127.0.0.1"},{stepOrder:2,stepName:"Ping",run:!0,success:!0,message:"Ping was successful after 42 milliseconds.",result:42},{stepOrder:3,stepName:"Connection",run:!0,success:!1,message:"Can't establish a secure connection: No matching protocol found.",result:new Error("No matching protocol found.")},{stepOrder:4,stepName:"Login",run:!1}]},f.I18n.setLanguage((navigator.language||navigator.userLanguage||"en").substring(0,2).toLowerCase())}handleTestConnection(o,s,l,T){return g(this,null,function*(){console.log("handleTestConnection",o,s,l,T)})}render(){return this.state.loaded?(0,e.jsx)(E.A,{injectFirst:!0,children:(0,e.jsx)(L.A,{theme:this.state.theme,children:(0,e.jsxs)(n.Box,{sx:W.app,children:[(0,e.jsx)("div",{style:W.item,children:(0,e.jsx)(n.FormControlLabel,{label:"alive",control:(0,e.jsx)(n.Switch,{checked:this.state.alive,onChange:this.handleAliveChange})})}),(0,e.jsx)("div",{style:W.item,children:(0,e.jsx)(O,{socket:this.socket,themeType:this.state.themeType,themeName:this.state.themeName,data:this.state.native,onError:()=>{},schema:{name:"ConfigCustomKlf200Set/Components/ConnectionTestComponent",type:"custom"}})})]})})}):(0,e.jsx)(E.A,{injectFirst:!0,children:(0,e.jsx)(L.A,{theme:this.state.theme,children:(0,e.jsx)(f.Loader,{themeType:this.state.themeType})})})}}const I=R;window.adapterName="adapter-component-template";const H=document.getElementById("root");(0,x.H)(H).render((0,e.jsx)(m().StrictMode,{children:(0,e.jsx)(I,{socket:{port:8081}})}))},93225:(M,u,t)=>{t.d(u,{A:()=>x});var e=t(28437),i=t.n(e);const x=e.createContext(null)},15217:(M,u,t)=>{t.d(u,{A:()=>x});var e=t(28437),i=t.n(e),m=t(93225);function x(){return e.useContext(m.A)}},36577:(M,u,t)=>{t.d(u,{A:()=>a,I:()=>b});var e=t(58168),i=t(98587),m=t(28437),x=t.n(m),E=t(95973),L=t.n(E),f=t(64922);const n=["value"],P=m.createContext();function _(h){let{value:y}=h,O=(0,i.A)(h,n);return(0,f.jsx)(P.Provider,(0,e.A)({value:y!=null?y:!0},O))}const b=()=>{const h=m.useContext(P);return h!=null?h:!1},a=_},34399:(M,u,t)=>{t.d(u,{A:()=>G});var e=t(58168),i=t(28437),m=t(95973),x=t(15217),E=t(93225);const f=typeof Symbol=="function"&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__";var n=t(64922);function P(d,v){return typeof v=="function"?v(d):(0,e.A)({},d,v)}function _(d){const{children:v,theme:p}=d,g=(0,x.A)(),W=i.useMemo(()=>{const R=g===null?p:P(g,p);return R!=null&&(R[f]=g!==null),R},[p,g]);return(0,n.jsx)(E.A.Provider,{value:W,children:v})}const b=_;var a=t(66252),h=t(25120),y=t(36577),O=t(78684);const F={};function U(d,v,p,g=!1){return i.useMemo(()=>{const W=d&&v[d]||v;if(typeof p=="function"){const R=p(W),I=d?(0,e.A)({},v,{[d]:R}):R;return g?()=>I:I}return d?(0,e.A)({},v,{[d]:p}):(0,e.A)({},v,p)},[d,v,p,g])}function N(d){const{children:v,theme:p,themeId:g}=d,W=(0,h.A)(F),R=(0,x.A)()||F,I=U(g,W,p),H=U(g,R,p,!0),X=I.direction==="rtl";return(0,n.jsx)(b,{theme:H,children:(0,n.jsx)(a.T.Provider,{value:I,children:(0,n.jsx)(y.A,{value:X,children:(0,n.jsx)(O.A,{value:I==null?void 0:I.components,children:v})})})})}const G=N},25120:(M,u,t)=>{t.d(u,{A:()=>L});var e=t(28437),i=t.n(e),m=t(66252);function x(f){return Object.keys(f).length===0}function E(f=null){const n=e.useContext(m.T);return!n||x(n)?f:n}const L=E},40805:(M,u,t)=>{t.d(u,{A:()=>b});var e=t(58168),i=t(98587),m=t(28437),x=t.n(m),E=t(95973),L=t.n(E),f=t(34399),n=t(92066),P=t(64922);const _=["theme"];function b(a){let{theme:h}=a,y=(0,i.A)(a,_);const O=h[n.A];return(0,P.jsx)(f.A,(0,e.A)({},y,{themeId:O?n.A:void 0,theme:O||h}))}},94140:(M,u,t)=>{var e,i=t(23479);if(1)u.H=i.createRoot,e=i.hydrateRoot;else var m},13394:(M,u,t)=>{var e;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i=t(28437),m=Symbol.for("react.element"),x=Symbol.for("react.fragment"),E=Object.prototype.hasOwnProperty,L=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function n(P,_,b){var a,h={},y=null,O=null;b!==void 0&&(y=""+b),_.key!==void 0&&(y=""+_.key),_.ref!==void 0&&(O=_.ref);for(a in _)E.call(_,a)&&!f.hasOwnProperty(a)&&(h[a]=_[a]);if(P&&P.defaultProps)for(a in _=P.defaultProps,_)h[a]===void 0&&(h[a]=_[a]);return{$$typeof:m,type:P,key:y,ref:O,props:h,_owner:L.current}}e=x,u.jsx=n,u.jsxs=n},64922:(M,u,t)=>{M.exports=t(13394)}}]);

//# sourceMappingURL=src_bootstrap_jsx.0cc6da8f.chunk.js.map