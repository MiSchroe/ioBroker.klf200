(self.webpackChunkiobroker_admin_component_klf200=self.webpackChunkiobroker_admin_component_klf200||[]).push([["node_modules_react_jsx-runtime_js-_3112","src_Components_jsx"],{62218:(T,h,a)=>{"use strict";a.r(h),a.d(h,{default:()=>G});var t=a(64922),P=a(28437),_=a(95973),r=a.n(_),s=a(67085),b=a(60556),g=Object.defineProperty,m=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,c=(i,e,n)=>e in i?g(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,y=(i,e)=>{for(var n in e||(e={}))l.call(e,n)&&c(i,n,e[n]);if(m)for(var n of m(e))x.call(e,n)&&c(i,n,e[n]);return i};const j={button:{minWidth:150},table:{minWidth:650}},v=(...i)=>e=>n=>{const d=(0,s.useTheme)(),u=(0,s.useMediaQuery)(d.breakpoints.up(...i));return(0,t.jsx)(e,y({mediaQuery:u},n))};class O extends b.ConfigGeneric{renderItem(e,n,d){return this.props.mediaQuery?(0,t.jsx)(s.TableContainer,{children:(0,t.jsxs)(s.Table,{children:[(0,t.jsx)(s.TableHead,{children:(0,t.jsxs)(s.TableRow,{children:[(0,t.jsx)(s.TableCell,{align:"left",size:"small",children:"Status"}),(0,t.jsx)(s.TableCell,{align:"left",children:"Step name"}),(0,t.jsx)(s.TableCell,{align:"left",children:"Result"}),(0,t.jsx)(s.TableCell,{align:"left",children:"Message"})]})}),(0,t.jsx)(s.TableBody,{children:this.props.data.testResults.map(o=>{var f,p;return(0,t.jsxs)(s.TableRow,{sx:{"&:last-child td, &:last-child th":{border:0}},hover:!0,children:[(0,t.jsx)(s.TableCell,{align:"center",size:"small",children:o.run?o.success?"\u2705":"\u274C":""}),(0,t.jsx)(s.TableCell,{align:"left",children:o.stepName}),(0,t.jsx)(s.TableCell,{align:typeof o.result=="number"?"right":"left",children:String((f=o.result)!=null?f:"")}),(0,t.jsx)(s.TableCell,{align:"left",children:(p=o.message)!=null?p:""})]},o.stepOrder)})})]})}):(0,t.jsx)(s.Stack,{divider:(0,t.jsx)(s.Divider,{orientation:"horizontal",flexItem:!0}),spacing:1,sx:{marginTop:1,overflow:"auto",height:"100%"},children:this.props.data.testResults.map(o=>{var f,p;return(0,t.jsxs)(s.Grid,{container:!0,children:[(0,t.jsx)(s.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:"Step name"}),(0,t.jsx)(s.Grid,{item:!0,xs:6,children:o.stepName}),(0,t.jsx)(s.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:"Status"}),(0,t.jsx)(s.Grid,{item:!0,xs:6,children:o.run?o.success?"\u2705":"\u274C":""}),(0,t.jsx)(s.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:"Result"}),(0,t.jsx)(s.Grid,{item:!0,xs:6,children:String((f=o.result)!=null?f:"")}),(0,t.jsx)(s.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:"Message"}),(0,t.jsx)(s.Grid,{item:!0,xs:6,children:(p=o.message)!=null?p:""})]},o.stepOrder)})})}}O.propTypes={socket:r().object.isRequired,themeType:r().string,themeName:r().string,style:r().object,data:r().object.isRequired,schema:r().object,onError:r().func,onChange:r().func};const I=v("sm")(O);var W=a(47952),w=Object.defineProperty,$=(i,e,n)=>e in i?w(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n,N=(i,e,n)=>$(i,typeof e!="symbol"?e+"":e,n),R=(i,e,n)=>new Promise((d,u)=>{var o=C=>{try{p(n.next(C))}catch(S){u(S)}},f=C=>{try{p(n.throw(C))}catch(S){u(S)}},p=C=>C.done?d(C.value):Promise.resolve(C.value).then(o,f);p((n=n.apply(i,e)).next())});const E={button:{minWidth:150},table:{minWidth:650}};class k extends b.ConfigGeneric{constructor(e){super(e),N(this,"onAliveChanged",(n,d)=>{const u=d?d.val:!1;u!==this.state.alive&&this.setState({alive:u})}),N(this,"testConnectionHandler",()=>{this.setState({testRunning:!0},()=>R(this,null,function*(){try{this.onUpdate;const n={command:"ConnectionTest",hostname:this.props.data.host,password:yield this.props.socket.encrypt(this.props.data.password)};this.props.data.advancedSSLConfiguration&&(n.advancedSSLConfiguration={sslFingerprint:this.props.data.SSLFingerprint,sslPublicKey:this.props.data.SSLPublicKey}),yield this.props.socket.subscribeOnInstance(`${this.props.adapterName}.${this.props.instance}`,"ConnectionTestProgress",void 0,this.onConnectionTestProgress);const d=yield this.props.socket.sendTo(`${this.props.adapterName}.${this.props.instance}`,n.command,n);this.setState({testResults:d})}finally{this.setState({testRunning:!1}),yield this.props.socket.unsubscribeFromInstance(`${this.props.adapterName}.${this.props.instance}`,"ConnectionTestProgress",this.onConnectionTestProgress)}}))}),this.state={alive:!1,testRunning:!1,testResults:[]}}componentDidMount(){super.componentDidMount(),this.props.socket.getState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`).then(e=>R(this,null,function*(){e&&e.val?this.setState({alive:e.val}):this.setState({alive:!1}),yield this.props.socket.subscribeState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`,this.onAliveChanged)}))}componentWillUnmount(){super.componentWillUnmount(),this.props.socket.unsubscribeState(`system.adapter.${this.props.adapterName}.${this.props.instance}.alive`,this.onAliveChanged)}onConnectionTestProgress(e,n,d){d==="ConnectionTestProgress"&&this.setState({testResults:e})}renderItem(e,n,d){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Button,{style:E.button,color:"secondary",variant:"contained",disabled:!this.state.alive||this.state.testRunning,onClick:this.testConnectionHandler,children:"Test connection"}),this.state.testRunning||this.state.testResults.length>0?(0,t.jsx)(I,{socket:this.props.socket,themeType:this.state.themeType,themeName:this.state.themeName,data:this.state,onError:()=>{},schema:{name:"ConfigCustomKlf200Set/Components/ConnectionTestResultTableComponent",type:"custom"}}):null]})}}k.propTypes={socket:r().object.isRequired,themeType:r().string,themeName:r().string,style:r().object,data:r().object.isRequired,attr:r().string,schema:r().object,onError:r().func,onChange:r().func};const G={ConnectionTestComponent:k}},13394:(T,h,a)=>{"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t=a(28437),P=Symbol.for("react.element"),_=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,b={key:!0,ref:!0,__self:!0,__source:!0};function g(m,l,x){var c,y={},j=null,v=null;x!==void 0&&(j=""+x),l.key!==void 0&&(j=""+l.key),l.ref!==void 0&&(v=l.ref);for(c in l)r.call(l,c)&&!b.hasOwnProperty(c)&&(y[c]=l[c]);if(m&&m.defaultProps)for(c in l=m.defaultProps,l)y[c]===void 0&&(y[c]=l[c]);return{$$typeof:P,type:m,key:j,ref:v,props:y,_owner:s.current}}h.Fragment=_,h.jsx=g,h.jsxs=g},64922:(T,h,a)=>{"use strict";T.exports=a(13394)},47952:()=>{}}]);

//# sourceMappingURL=src_Components_jsx.e505f762.chunk.js.map