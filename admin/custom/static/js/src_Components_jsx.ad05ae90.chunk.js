"use strict";(self.webpackChunkiobroker_admin_component_klf200=self.webpackChunkiobroker_admin_component_klf200||[]).push([["node_modules_react_jsx-runtime_js","src_Components_jsx"],{62218:(S,g,i)=>{i.r(g),i.d(g,{default:()=>j});var e=i(64922),v=i(28437),$=i.n(v),O=i(95973),n=i(67085),r=i(37449);const b=({testResults:s})=>{const l=(0,n.useTheme)();return(0,n.useMediaQuery)(l.breakpoints.up("sm"))?(0,e.jsx)(n.TableContainer,{children:(0,e.jsxs)(n.Table,{children:[(0,e.jsx)(n.TableHead,{children:(0,e.jsxs)(n.TableRow,{children:[(0,e.jsx)(n.TableCell,{align:"left",size:"small",children:r.I18n.t("custom_klf200_test_connection_status_header")}),(0,e.jsx)(n.TableCell,{align:"left",children:r.I18n.t("custom_klf200_test_connection_step_name_header")}),(0,e.jsx)(n.TableCell,{align:"left",children:r.I18n.t("custom_klf200_test_connection_result_header")}),(0,e.jsx)(n.TableCell,{align:"left",children:r.I18n.t("custom_klf200_test_connection_message_header")})]})}),(0,e.jsx)(n.TableBody,{children:s.map(t=>{var a,u;return(0,e.jsxs)(n.TableRow,{sx:{"&:last-child td, &:last-child th":{border:0}},hover:!0,children:[(0,e.jsx)(n.TableCell,{align:"center",size:"small",children:t.run?t.success?"\u2705":"\u274C":""}),(0,e.jsx)(n.TableCell,{align:"left",children:t.stepName}),(0,e.jsx)(n.TableCell,{align:typeof t.result=="number"?"right":"left",children:String((a=t.result)!=null?a:"")}),(0,e.jsx)(n.TableCell,{align:"left",children:(u=t.message)!=null?u:""})]},t.stepOrder)})})]})}):(0,e.jsx)(n.Stack,{divider:(0,e.jsx)(n.Divider,{orientation:"horizontal",flexItem:!0}),spacing:1,sx:{marginTop:1,overflow:"auto",height:"100%"},children:s.map(t=>{var a,u;return(0,e.jsxs)(n.Grid,{container:!0,children:[(0,e.jsx)(n.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:r.I18n.t("custom_klf200_test_connection_step_name_header")}),(0,e.jsx)(n.Grid,{item:!0,xs:6,children:t.stepName}),(0,e.jsx)(n.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:r.I18n.t("custom_klf200_test_connection_status_header")}),(0,e.jsx)(n.Grid,{item:!0,xs:6,children:t.run?t.success?"\u2705":"\u274C":""}),(0,e.jsx)(n.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:r.I18n.t("custom_klf200_test_connection_result_header")}),(0,e.jsx)(n.Grid,{item:!0,xs:6,children:String((a=t.result)!=null?a:"")}),(0,e.jsx)(n.Grid,{item:!0,xs:6,display:"flex",justifyContent:"left",alignItems:"left",fontWeight:"bold",children:r.I18n.t("custom_klf200_test_connection_message_header")}),(0,e.jsx)(n.Grid,{item:!0,xs:6,children:(u=t.message)!=null?u:""})]},t.stepOrder)})})};var x=(s,l,o)=>new Promise((t,a)=>{var u=m=>{try{p(o.next(m))}catch(C){a(C)}},T=m=>{try{p(o.throw(m))}catch(C){a(C)}},p=m=>m.done?t(m.value):Promise.resolve(m.value).then(u,T);p((o=o.apply(s,l)).next())});const c={button:{minWidth:150}},j={ConnectionTestComponent:({adapterName:s,instance:l,socket:o,data:t})=>{const[a,u]=(0,v.useState)(!1),[T,p]=(0,v.useState)(!1),[m,C]=(0,v.useState)([]);(0,v.useEffect)(()=>{const h=(d,f)=>{const y=f?f.val:!1;u(y)};return x(void 0,null,function*(){const d=yield o.getState(`system.adapter.${s}.${l}.alive`);d&&d.val!==void 0?u(d.val):u(!1),yield o.subscribeState(`system.adapter.${s}.${l}.alive`,h)}),()=>{o.unsubscribeState(`system.adapter.${s}.${l}.alive`,h)}},[]),(0,v.useEffect)(()=>{const h=(d,f)=>{if(d.endsWith(".running")){const y=f?f.val:!1;p(y)}else if(d.endsWith(".testResults")){const y=f?JSON.parse(f.val||"[]"):[];C(y)}};return x(void 0,null,function*(){const d=yield o.getState(`${s}.${l}.TestConnection.running`);if(d&&d.val===!0){p(d.val);const f=yield o.getState(`${s}.${l}.TestConnection.testResults`);f&&f.val!==void 0&&C(JSON.parse(f.val||"[]"))}else p(!1),o.setState(`${s}.${l}.TestConnection.testResults`,"[]",!0);yield o.subscribeState(`${s}.${l}.TestConnection.*`,h)}),()=>{o.unsubscribeState(`${s}.${l}.TestConnection.*`,h)}},[]);const w=()=>x(void 0,null,function*(){try{const h={command:"ConnectionTest",hostname:t.host,password:yield o.encrypt(t.password)};t.advancedSSLConfiguration&&(h.advancedSSLConfiguration={sslFingerprint:t.SSLFingerprint,sslPublicKey:t.SSLPublicKey});const k=yield o.sendTo(`${s}.${l}`,h.command,h);C(k)}finally{}});return(0,e.jsxs)($().Fragment,{children:[(0,e.jsx)(n.Button,{style:c.button,color:"secondary",variant:"contained",disabled:!a||T,onClick:w,children:r.I18n.t("custom_klf200_test_connection_button")}),!a&&(0,e.jsx)("p",{children:r.I18n.t("custom_klf200_test_connection_not_alive_hint")}),(T||m.length>0)&&(0,e.jsx)(b,{testResults:m})]})}}},13394:(S,g,i)=>{var e;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v=i(28437),$=Symbol.for("react.element"),O=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,r=v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,R={key:!0,ref:!0,__self:!0,__source:!0};function b(x,c,I){var _,j={},s=null,l=null;I!==void 0&&(s=""+I),c.key!==void 0&&(s=""+c.key),c.ref!==void 0&&(l=c.ref);for(_ in c)n.call(c,_)&&!R.hasOwnProperty(_)&&(j[_]=c[_]);if(x&&x.defaultProps)for(_ in c=x.defaultProps,c)j[_]===void 0&&(j[_]=c[_]);return{$$typeof:$,type:x,key:s,ref:l,props:j,_owner:r.current}}e=O,g.jsx=b,g.jsxs=b},64922:(S,g,i)=>{S.exports=i(13394)}}]);

//# sourceMappingURL=src_Components_jsx.ad05ae90.chunk.js.map